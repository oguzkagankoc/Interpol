<!doctype html>
<html>
  <head>
    <title>Results</title>
    <style>
      .pagination {
        display: flex;
        justify-content: center;
      }
      .pagination a {
        margin: 0 5px;
      }
    </style>
  </head>
  <body>
    <table>
      <tr>
        <th>Entity ID</th>
        <th>Forename</th>
        <th>Name</th>
        <th>Sex ID</th>
        <th>Date of Birth</th>
        <th>Place of Birth</th>
        <th>Country of Birth ID</th>
        <th>Weight</th>
        <th>Height</th>
        <th>Distinguishing Marks</th>
        <th>Eyes Colors ID</th>
        <th>Hairs ID</th>
        <th>Is Active</th>
        <th>Thumbnail</th>
      </tr>
      {% for person in pagination.items %}
      <tr>
        <td>{{ person.entity_id }}</td>
        <td>{{ person.forename }}</td>
        <td>{{ person.name }}</td>
        <td>{{ person.sex_id }}</td>
        <td>{{ person.date_of_birth }}</td>
        <td>{{ person.place_of_birth }}</td>
        <td>{{ person.country_of_birth_id }}</td>
        <td>{{ person.weight }}</td>
        <td>{{ person.height }}</td>
        <td>{{ person.distinguishing_marks }}</td>
        <td>{{ person.eyes_colors_id }}</td>
        <td>{{ person.hairs_id }}</td>
        <td>{{ person.is_active }}</td>
        <td class="thumbnail">{{ person.thumbnail }}</td>
      </tr>
      {% endfor %}
    </table>
    <div class="pagination">
      {% if pagination.has_prev %}
      <a href="{{ url_for('results', page=pagination.prev_num) }}">Previous</a>
      {% endif %}
      {% for num in pagination.iter_pages(left_edge=1, left_current=1, right_current=2, right_edge=1) %}
      {% if num %}
      {% if num != pagination.page %}
      <a href="{{ url_for('results', page=num) }}">{{ num }}</a>
      {% else %}
      <span>{{ num }}</span>
      {% endif %}
      {% else %}
      <span class="ellipsis">&#8230;</span>
      {% endif %}
      {% endfor %}
      {% if pagination.has_next %}
      <a href="{{ url_for('results', page=pagination.next_num) }}">Next</a>
      {% endif %}
    </div>
    <script>
      // Tüm td öğelerini seç
      const tds = document.querySelectorAll('.thumbnail');
      // Her td öğesi için
      tds.forEach(td => {
        // İçeriği base64'den decode et
        const base64 = td.textContent;
        const image = new Image();
        image.src = "data:image/jpeg;base64," + base64;
        // Yeni bir img öğesi oluştur ve td içine ekle
        td.innerHTML = '';
        td.appendChild(image);
      });
    </script>
  </body>
</html>
